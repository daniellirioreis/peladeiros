<h2>Editar Usuário</h2>

<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put }) do |f| %>
  <%= devise_error_messages! %>

  <p><%= f.label :email, 'Email' %><br />
  <%= f.email_field :email %></p>

  <p><%= f.label :password, "Senha" %> <i>(deixe em branco se você não quer mudá-lo)</i><br />
  <%= f.password_field :password %></p>

  <p><%= f.label :password_confirmation, "Confirmação de senha" %><br />
  <%= f.password_field :password_confirmation %></p>

  <p><%= f.label :current_password, "Senha corrente" %> <i>(precisamos de sua senha atual para confirmar as alterações)</i><br />
  <%= f.password_field :current_password %></p>
<fieldset>
  <legend>Escolha o seus clubes</legend>
  <p>
    <%= f.label :company_default_id, 'Clube padrão' %><br />    
    <%= f.select :company_default_id , Company.all.collect{|p| [p.name, p.id]}, {:prompt => 'Selecione'} %>    
  </p>


  <% unless Company.all.empty? %>
      <table>
        <% contador = 0 %>
        <% Company.all.each do |company| %>
          <% if contador == 0 %>
            <tr>
            <%end%>
            <%  contador = contador + 1 %>
            <td>&nbsp;&nbsp;<%= check_box_tag 'user[company_ids][]', company.id, resource.company_ids.include?(company.id),  %>
              <%= company.name %>&nbsp;&nbsp;</td>
            <% if contador == 3 %>
              <%contador = 0%>
            </tr>
          <%end%>
        <% end %>
      </table>
  <% end %>
</fieldset>    

  <p><%= f.submit "Alterar" %></p>
<% end %>

<h3>Cancelar minha conta</h3>

<p>infeliz? <%= link_to "Cancelar minha conta", registration_path(resource_name), :confirm => "Confirma exclusão?", :method => :delete %>.</p>

<%= link_to "Voltar", :back, :class => 'botao' %>
